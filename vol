#!/bin/bash
# ==================================================================
# FILE     vol
# MACHINE  all
# INFO     just some amixer wrapper
#
# DATE     14.05.2014
# OWNER    Bischofberger
# ==================================================================

die() {
    echo -e "$0: Error: $1" >&2
    exit 1
}

# no argument gives info
if [ -z "$1" ] ; then
    amixer sget Master
    exit 0
fi

# toggle mute, increase, decrease
case "$1" in
    "t")
        amixer -q sset Master toggle
        exit 0
        ;;
    "+")
        amixer -q sset Master 5+
        exit 0
        ;;
    "-")
        amixer -q sset Master 5-
        exit 0
        ;;
    *)
        ;;
esac

# check if argument is not a number between 0 and 10
regex='^[0-9]$'
if ! [[ $1 =~ $regex ]] && [[ $1 != 10 ]] ; then
    die "not a (valid) number."
fi

# set volume
let "vol = 10 * $1"
amixer -q sset Master $vol% unmute
